<!DOCTYPE html>
<html lang="en" class="dark" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Thumbnail Generator</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">


    <!-- Tailwind Config (MATCHES home.html) -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        bg: '#0b0d10',
                        panel: '#11141a',
                        border: '#1f2430',
                        accent: '#ff0033'
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background:
              radial-gradient(900px at 15% 10%, rgba(255,0,51,.08), transparent 40%),
              radial-gradient(700px at 85% 85%, rgba(255,255,255,.04), transparent 40%),
              #0b0d10;
        }

        .panel {
            background: linear-gradient(
              180deg,
              rgba(20,24,34,.92),
              rgba(15,18,26,.92)
            );
            border: 1px solid #1f2430;
            box-shadow: 0 40px 120px rgba(0,0,0,.85);
        }

        .thumb-box {
            border: 1px solid #222836;
            border-radius: 1rem;
            overflow: hidden;
        }

        @keyframes cinematicFade {
          from {
            opacity: 0;
            transform: translateY(28px) scale(.97);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
        .cinematic-enter {
          animation: cinematicFade 1.2s cubic-bezier(.2,.8,.2,1) both;
        }

         .magnetic {
          transition: transform .25s ease, box-shadow .25s ease;
        }
        .magnetic:hover {
          transform: translateY(-2px) scale(1.03);
          box-shadow: 0 24px 70px rgba(255,0,51,.35);
        }

    </style>
</head>

<body class="min-h-screen text-slate-200">

<div class="fixed inset-0 -z-10 pointer-events-none">
    <div class="absolute top-32 left-1/2 -translate-x-1/2
              w-[720px] h-[320px]
              bg-[#ff0033]/10
              blur-[160px] rounded-full">
    </div>
</div>


<!-- NAVBAR -->
<div th:replace="~{fragments/navbar :: navbar}" th:with="activePage='thumbnails'"></div>

<div class="cinematic-enter">

<!-- HERO -->
<section class="max-w-6xl mx-auto px-6 pt-28 pb-24 text-center">
    <h1 class="text-6xl md:text-7xl font-black tracking-tight text-white mb-8">
        Thumbnail Generator
    </h1>
    <p class="max-w-2xl mx-auto text-lg text-slate-400 leading-relaxed">
        Extract high-resolution YouTube thumbnails with cinematic clarity.
        Perfect for previews, analysis, and content optimization.
    </p>
</section>

<!-- TOOL PANEL -->
<section class="max-w-4xl mx-auto px-6 pb-32">

    <div class="panel rounded-3xl p-10 mb-12">

        <form th:action="@{/get-thumbnail}" method="post">

            <label for="videoUrlOrId"
                   class="block text-sm text-slate-400 mb-3">
                YouTube Video URL or ID
            </label>

            <input type="text"
                   id="videoUrlOrId"
                   name="videoUrlOrId"
                   required
                   placeholder="Paste YouTube URL or Video ID"
                   class="w-full px-6 py-5 rounded-xl
                          bg-[#0e1118]
                          border border-[#222836]
                          text-white text-lg font-medium
                          placeholder:text-slate-500
                          focus:outline-none
                          focus:border-[#ff0033]
                          focus:shadow-[0_0_0_1px_rgba(255,0,51,0.4)]
                          transition">

            <button type="submit"
                    class="magnetic mt-8 w-full py-5 rounded-xl
                           bg-[#ff0033]
                           text-white font-semibold
                           hover:brightness-110
                           transition">
                Get Thumbnail
            </button>
        </form>

        <!-- ERROR -->
        <div th:if="${error}"
             class="mt-6 bg-red-500/10 border border-red-500/30
                    rounded-xl p-4 text-red-400"
             th:text="${error}">
        </div>

    </div>

    <!-- RESULT -->
    <div th:if="${thumbnailUrl}"
         class="panel rounded-3xl p-8">

        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-semibold text-white">
                High-Resolution Thumbnail (1280Ã—720)
            </h2>

            <button type="button"
                    th:onclick="'downloadImage(\\'' + ${thumbnailUrl} + '\\', \\'youtube-thumbnail-' + ${videoId} + '-hq.jpg\\')'"
                    class="magnetic px-4 py-2 rounded-lg
                           border border-[#222836]
                           hover:border-[#ff0033]
                           transition">
                Download
            </button>
        </div>

        <div class="thumb-box p-4 bg-[#0e1118]">
            <img th:src="${thumbnailUrl}"
                 alt="YouTube Thumbnail"
                 class="w-full h-auto rounded-xl"
                 onerror="this.onerror=null;this.src='https://via.placeholder.com/1280x720?text=Thumbnail+Not+Available';">
        </div>

    </div>

</section>

<script>
    function downloadImage(url, filename) {
        fetch(url, { mode: 'cors' })
            .then(response => response.blob())
            .then(blob => {
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = filename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            })
            .catch(() => alert('Failed to download thumbnail.'));
    }
</script>
</div>
<div id="cursorGlow"
     class="pointer-events-none fixed w-64 h-64
            bg-[#ff0033]/10
            blur-[120px] rounded-full
            -translate-x-1/2 -translate-y-1/2">
</div>

<script>
    document.addEventListener("mousemove", e => {
      const glow = document.getElementById("cursorGlow");
      glow.style.left = e.clientX + "px";
      glow.style.top = e.clientY + "px";
    });
</script>
</body>
</html>
